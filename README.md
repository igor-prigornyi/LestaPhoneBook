# LestaPhoneBook

Проект тестового задания по реализации клиент-серверного приложения телефонной книги.

**Функционал:** клиентское приложение реализует функционал, позволяющий добавлять/удалять/искать записи в телефонной книге, где записи могут содержать поля с именем, фамилией, отчеством, номером телефона и текстовой заметкой. Серверное приложение хранит базу данных с записями, обрабатывает входящие запросы и формирует ответы.

**Реализация:** клиентское приложение исполнено в двух вариантах: консольная версия (PhoneBookClientConsole) и версия с GUI (PhoneBookClientGUI). Клиентское приложение написано на `Python` (GUI-версия написана при помощи framework'а `Tkinter`). Серверное приложение (PhoneBookServer) написано на `С++` с использованием стандарта `C++17`. Клиенты и сервер взаимодействуют при помощи технологии `gRPC`. 

**Детали реализации:** серверное приложение работает в асинхронном режиме, реализуя очередь запросов (обработчиков/handler'ов соединений), благодаря чему сервер не блокируется и принимает в очередь на обработку другие запросы во время выполнения текущего запроса из очереди. Дополнительно реализован функционал поиска записей по содержимому текстовой заметки, найденные записи ранжируются по релевантности TF-IDF. Сервер хранит своё состояние (хранит базу данных локально) между перезапусками. Для остановки приложения сервера необходимо нажать пробел или ESC.

Код снабжён подробными комментариями. Ниже приведена инструкция по сборке и запуску серверного и клиентских приложений. Приложение тестировалось на Ubuntu 22.04.4 LTS.

## Сборка проекта сервера PhoneBookServer:

Поскольку gRPC был инсталлирован локально в папку `"gRPC"` в домашней папке, возможно, потребуется внести в терминал пути до дириктории инсталляции gRPC. В моём случае:
```console
export GRPC_INSTALL_DIR=$HOME/.local
export PATH="$GRPC_INSTALL_DIR/bin:$PATH"
```

Переходим в дерикторию сервра:
```console
cd PhoneBookServer
```

Создаём (при отсутствии) дерикторию со сборкой:
```console
mkdir -p cmake/build
```

Переходим в дерикторию со сборкой:
```console
cd cmake/build
```
Конфигурация сбоки внесена в `CMakeLists.txt`. Запускаем CMake:
```console
cmake -DCMAKE_PREFIX_PATH=$GRPC_INSTALL_DIR ../..
```

Собираем проект:
```console
make -j 4
```

Запускаем:
```console
./main
```

Для очистки сборки проекта нужно вызвать команду:
```console
make clean
```

## Сборка проекта консольной версии клиента PhoneBookClientConsole:

Переходим в дерикторию консольной версии клиента:
```console
cd PhoneBookClientConsole
```

Собираем `pb2.grpc.py`-, `pb2.py`- и `pb2.pyi`-файлы из proto-файла:
```console
python3 -m grpc_tools.protoc -I../protos --python_out=. --pyi_out=. --grpc_python_out=. ../protos/connection.proto
```

Запускаем:
```console
python3 main.py
```

## Сборка проекта GUI версии клиента PhoneBookClientGUI:

Переходим в дерикторию GUI версии клиента:
```console
cd PhoneBookClientGUI
```

Возможно, потребуется установить пакет `Tkinter` для Python (можно создать виртуальное окружение/venv):
```console
sudo apt install python3-tk
```

Собираем `pb2.grpc.py`-, `pb2.py`- и `pb2.pyi`-файлы из proto-файла:
```console
python3 -m grpc_tools.protoc -I../protos --python_out=. --pyi_out=. --grpc_python_out=. ../protos/connection.proto
```

Запускаем:
```console
python3 main.py
```
